import{C as I}from"./CardLeasing-Tw4ZjpOD.js";import{_ as D,h as V,M as L,r as l,o as a,c as p,a as u,b as i,d as o,w as m,T as E,i as T,f as g,F as q,e as U,j as Y,p as _,g as N,k as O}from"./index-zqLGu8qD.js";import{P as Z}from"./PageProductMixin-vt5p3c_9.js";import{u as j,a as H,h as n}from"./axios-3ULUJdox.js";import{L as z}from"./LeasingCar-egx47inT.js";import"./card-image-SkxdPB-2.js";import"./BaseFooterSimple-dygpq0Zw.js";import"./BaseAccordion-EcQnJO-6.js";const A="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Fill'%3e%3cpath%20id='Subtract'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.9992%200.333374C6.89929%200.333374%200.333008%206.89966%200.333008%2014.9996C0.333008%2023.0995%206.89929%2029.6658%2014.9992%2029.6658C23.0991%2029.6658%2029.6654%2023.0995%2029.6654%2014.9996C29.6654%206.89966%2023.0991%200.333374%2014.9992%200.333374ZM16.4992%209.00004V7.50004H13.4992V9.00004V14.9998V16.4998H16.4992V14.9998V9.00004ZM16.4992%2020.9993C16.4992%2020.1709%2015.8276%2019.4993%2014.9992%2019.4993C14.1708%2019.4993%2013.4992%2020.1709%2013.4992%2020.9993V21.666C13.4992%2022.4944%2014.1708%2023.166%2014.9992%2023.166C15.8276%2023.166%2016.4992%2022.4944%2016.4992%2021.666V20.9993Z'%20fill='%23BF3535'/%3e%3c/g%3e%3c/svg%3e",G={components:{CardLeasing:I,BaseToast:V,ModalCallback:L},mixins:[Z],data(){return{leasingCar:"",copyLeasingCar:"",selectedModelOutsideItems:"",showModalCallback:!1,filterData:j()}},watch:{filterData:{handler(){this.selectedModelOutsideItems=this.filterData.similarModel},deep:!0}},methods:{async getLeasingCars(){this.loading=!0;try{const e=await H.get("https://my.api.mockaroo.com/leasing_cars.json?key=a84cf050*");this.leasingCar=e.data}catch{this.leasingCar=z}this.product=n.getCarProducts(this.leasingCar),this.getDataFilter(),this.loading=!1},getDataFilter(e=this.product){this.model=n.getCarModels(this.product),this.brand=n.getUniqueElements(this.product,"brand"),this.promo=n.getUniqueElements(e,"promo"),this.drive=n.getUniqueElements(e,"drive"),this.fuel=n.getUniqueElements(e,"fuel"),this.body=n.getUniqueElements(e,"body"),this.transmission=n.getUniqueElements(e,"transmission"),this.condition=n.getUniqueElements(e,"condition"),[this.minPrice,this.maxPrice]=n.findMinMaxDigits(e,"price"),[this.minYear,this.maxYear]=n.findMinMaxDigits(e,"year")},resetFilter(){this.getDataFilter(),this.reset++,this.filterData.similarModel=""},selectedModelFromCard(e){this.filterData.similarModel=e}},created(){this.getLeasingCars()},mounted(){this.filterData.similarModel&&(this.selectedModelOutsideItems=this.filterData.similarModel)},unmounted(){this.filterData.similarModel=""}},f=e=>(_("data-v-da900a03"),e=e(),N(),e),R={key:1,class:"wrapper"},J={class:"main"},K={class:"main-catalog"},Q={class:"main-sidebar"},W=["disabled"],X={class:"main-content"},$=f(()=>i("img",{src:A,alt:"attention icon"},null,-1)),x={class:"attention-box"},ee=f(()=>i("span",{class:"attention-box__title"},"В каталоге представлены автомобили, которые проходят по программам лизинга. ",-1)),te={class:"attention-box__text"},se=f(()=>i("img",{src:O,alt:"close circle"},null,-1)),oe={class:"filter-group"},le={key:0,class:"product"},ie={key:1,class:"product-null"},ne={class:"modal-callback"};function ae(e,t,re,de,r,c){const C=l("TheLoader"),h=l("filter-range"),d=l("filter-checkbox"),b=l("FilterCheckboxModels"),v=l("router-link"),k=l("base-toast"),M=l("FilterButton"),S=l("CardLeasing"),B=l("BaseBanner"),w=l("ModalCallback"),F=l("BasePagination"),y=l("BaseFooterSimple");return e.loading?(a(),p(C,{key:0})):(a(),u("div",R,[i("main",J,[i("div",K,[i("div",Q,[i("button",{disabled:e.disabledResetButton,onClick:t[0]||(t[0]=(...s)=>c.resetFilter&&c.resetFilter(...s)),class:"button button--reset button--color-red button--size-xs"}," Сбросить фильтр ",8,W),o(h,{"title-filter":"Цена","value-type":"amount","value-min":e.minPrice,"value-max":e.maxPrice,"reset-selected":e.reset,onSelectedMin:t[1]||(t[1]=s=>e.selectMinPrice=s),onSelectedMax:t[2]||(t[2]=s=>e.selectMaxPrice=s)},null,8,["value-min","value-max","reset-selected"]),o(d,{"title-filter":"Марка","reset-selected":e.reset,options:e.brand,onSelectedItems:t[3]||(t[3]=s=>e.selectBrand=s)},null,8,["reset-selected","options"]),o(b,{onSelectedItems:t[4]||(t[4]=s=>e.selectModel=s),options:e.model,"reset-selected":e.reset,"selected-outside":r.selectedModelOutsideItems},null,8,["options","reset-selected","selected-outside"]),o(d,{"title-filter":"Кузов","reset-selected":e.reset,options:e.body,onSelectedItems:t[5]||(t[5]=s=>e.selectBody=s)},null,8,["reset-selected","options"]),o(d,{"title-filter":"Коробка передач","reset-selected":e.reset,options:e.transmission,onSelectedItems:t[6]||(t[6]=s=>e.selectTransmission=s)},null,8,["reset-selected","options"]),o(d,{"title-filter":"Привод","reset-selected":e.reset,options:e.drive,onSelectedItems:t[7]||(t[7]=s=>e.selectDrive=s)},null,8,["reset-selected","options"]),o(d,{"title-filter":"Вид топлива","reset-selected":e.reset,options:e.fuel,onSelectedItems:t[8]||(t[8]=s=>e.selectFuel=s)},null,8,["reset-selected","options"]),o(h,{"title-filter":"Год выпуска","value-type":"year","value-min":e.minYear,"value-max":e.maxYear,"reset-selected":e.reset,onSelectedMin:t[9]||(t[9]=s=>e.selectMinYear=s),onSelectedMax:t[10]||(t[10]=s=>e.selectMaxYear=s)},null,8,["value-min","value-max","reset-selected"])]),i("div",X,[o(k,null,{content:m(()=>[$,i("p",x,[ee,i("span",te,[g("Если Вам необходим автомобиль в аренду перейдите в раздел "),o(v,{to:"/rent"},{default:m(()=>[g("Аренда")]),_:1}),g(". ")])])]),close:m(()=>[se]),_:1}),i("div",oe,[o(M,{"reset-selected":e.reset,onSelectedItems:t[11]||(t[11]=s=>e.selectCondition=s),name:"condition",options:e.condition},null,8,["reset-selected","options"]),o(M,{"reset-selected":e.reset,onSelectedItems:t[12]||(t[12]=s=>e.selectPromo=s),name:"promo",options:e.promo},null,8,["reset-selected","options"])]),e.filteringProduct.length?(a(),u("div",le,[o(E,{name:"collapse"},{default:m(()=>[(a(!0),u(q,null,U(e.filteringProduct.slice(e.pageStart,e.pageEnd),s=>(a(),p(S,{key:s.id,onSelectedModel:t[13]||(t[13]=P=>c.selectedModelFromCard(P)),product:s},null,8,["product"]))),128))]),_:1})])):(a(),u("div",ie,"Ничего не найдено")),o(B,{title:"Не нашли ничего подходящего?",text:"Предложите свой вариант!",button:"Оставить заявку",onClickButton:t[14]||(t[14]=s=>r.showModalCallback=!0)}),i("div",ne,[o(T,{name:"fade"},{default:m(()=>[r.showModalCallback?(a(),p(w,{key:0,"show-modal":r.showModalCallback,onCloseModal:t[15]||(t[15]=s=>r.showModalCallback=!1)},null,8,["show-modal"])):Y("",!0)]),_:1})]),o(F,{"total-amount-data":e.filteringProduct.length,onActualPage:t[16]||(t[16]=s=>(e.pageStart=s.start,e.pageEnd=s.end))},null,8,["total-amount-data"]),o(y)])])])]))}const Ce=D(G,[["render",ae],["__scopeId","data-v-da900a03"]]);export{Ce as default};

import{C as O}from"./CardLeasing-r5xMbTiX.js";import{_ as q,D as U,M as L,s as l,t as n,f as a,g as m,i,j as T,u as o,x as p,z as u,F as h,m as k,k as c,T as Y,E as j,y as b,A,C as G,G as N}from"./index-oDmp-PGg.js";import{P as z,_ as Z}from"./icon-filter-ehLWeoBR.js";import{f as $}from"./apiUtils-05fuKnWJ.js";import{u as H}from"./FilterDataStore-ZuzWpcan.js";import{_}from"./arrow-right-black-bCXs9acw.js";import"./CardSkeleton-VwSS74tU.js";import"./BaseFooterSimple-XSBzPcc5.js";import"./BaseAccordion-V6zT_r4E.js";const R="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Fill'%3e%3cpath%20id='Subtract'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.9992%200.333374C6.89929%200.333374%200.333008%206.89966%200.333008%2014.9996C0.333008%2023.0995%206.89929%2029.6658%2014.9992%2029.6658C23.0991%2029.6658%2029.6654%2023.0995%2029.6654%2014.9996C29.6654%206.89966%2023.0991%200.333374%2014.9992%200.333374ZM16.4992%209.00004V7.50004H13.4992V9.00004V14.9998V16.4998H16.4992V14.9998V9.00004ZM16.4992%2020.9993C16.4992%2020.1709%2015.8276%2019.4993%2014.9992%2019.4993C14.1708%2019.4993%2013.4992%2020.1709%2013.4992%2020.9993V21.666C13.4992%2022.4944%2014.1708%2023.166%2014.9992%2023.166C15.8276%2023.166%2016.4992%2022.4944%2016.4992%2021.666V20.9993Z'%20fill='%23BF3535'/%3e%3c/g%3e%3c/svg%3e",J={components:{CardLeasing:O,BaseToast:U,ModalCallback:L},mixins:[z],data(){return{leasingCar:"",selectedModelOutsideItems:"",showModalCallback:!1,filterData:H()}},watch:{},methods:{async getLeasingCars(){this.loading=!0;const e="data/leasing_car.json";this.leasingCar=await $("https://my.api.mockaroo.com/leasing_cars.json?key=a84cf050*",`/voshod/${e}`),typeof this.leasingCar=="object"&&this.actionsAfterGettingData(),this.loading=!1},actionsAfterGettingData(){this.product=l.getCarProducts(this.leasingCar),this.getDataFilter()},getDataFilter(){this.model=l.getCarModels(this.product),this.brand=l.getUniqueElements(this.product,"brand"),this.promo=l.getUniqueElements(this.product,"promo"),this.drive=l.getUniqueElements(this.product,"drive"),this.fuel=l.getUniqueElements(this.product,"fuel"),this.body=l.getUniqueElements(this.product,"body"),this.transmission=l.getUniqueElements(this.product,"transmission"),this.condition=l.getUniqueElements(this.product,"condition"),[this.minPrice,this.maxPrice]=l.findMinMaxDigits(this.product,"price"),[this.minYear,this.maxYear]=l.findMinMaxDigits(this.product,"year")},resetFilter(){this.getDataFilter(),this.reset++,this.filterData.similarModel=""},selectedModelFromCard(e){this.filterData.similarModel=e}},created(){this.getLeasingCars()},mounted(){this.filterData.similarModel&&(this.selectedModelOutsideItems=this.filterData.similarModel)},unmounted(){this.filterData.similarModel=""}},C=e=>(A("data-v-9542cdcf"),e=e(),G(),e),K={class:"wrapper"},Q={class:"main"},W={class:"main-catalog"},X={class:"main-sidebar__header"},x=["disabled"],ee={class:"main-content"},te=C(()=>i("img",{src:R,alt:"attention icon"},null,-1)),se={class:"attention-box"},oe=C(()=>i("span",{class:"attention-box__title"}," В каталоге представлены автомобили, которые проходят по программам лизинга. ",-1)),ie={class:"attention-box__text"},ne=C(()=>i("img",{src:N,alt:"close circle"},null,-1)),le={class:"filter-group"},ae={class:"product"},re={key:0,class:"product-null"},de={class:"modal-callback"};function me(e,t,pe,ue,r,g){const f=n("FilterButton"),M=n("filter-range"),d=n("filter-checkbox"),v=n("FilterCheckboxModels"),S=n("router-link"),B=n("base-toast"),w=n("BaseSkeleton"),y=n("CardSkeleton"),F=n("CardLeasing"),P=n("BaseBanner"),D=n("ModalCallback"),I=n("BasePagination"),V=n("BaseFooterSimple");return a(),m("div",K,[i("main",Q,[i("div",W,[i("div",{class:T([{"main-sidebar--open":e.isOpenSlidingSidebar},"main-sidebar"])},[i("div",X,[i("img",{onClick:t[0]||(t[0]=s=>e.isOpenSlidingSidebar=!e.isOpenSlidingSidebar),src:_,alt:"arrow back",class:"main-sidebar__header-close"})]),i("button",{disabled:e.disabledResetButton,onClick:t[1]||(t[1]=(...s)=>g.resetFilter&&g.resetFilter(...s)),class:"button button--reset button--color-red button--size-xs"}," Сбросить фильтр ",8,x),o(f,{class:"main-sidebar__promo",name:"promo",options:e.promo,"reset-selected":e.reset,onSelectedItems:t[2]||(t[2]=s=>e.selectPromo=s)},null,8,["options","reset-selected"]),o(M,{"title-filter":"Цена","value-type":"amount","value-min":e.minPrice,"value-max":e.maxPrice,"reset-selected":e.reset,open:!e.loading,onSelectedMin:t[3]||(t[3]=s=>e.selectMinPrice=s),onSelectedMax:t[4]||(t[4]=s=>e.selectMaxPrice=s)},null,8,["value-min","value-max","reset-selected","open"]),o(d,{"title-filter":"Марка","reset-selected":e.reset,options:e.brand,open:!e.loading,onSelectedItems:t[5]||(t[5]=s=>e.selectBrand=s)},null,8,["reset-selected","options","open"]),o(v,{onSelectedItems:t[6]||(t[6]=s=>e.selectModel=s),options:e.model,"reset-selected":e.reset,"selected-outside":r.selectedModelOutsideItems,open:!e.loading},null,8,["options","reset-selected","selected-outside","open"]),o(d,{"title-filter":"Кузов","reset-selected":e.reset,options:e.body,open:!e.loading,onSelectedItems:t[7]||(t[7]=s=>e.selectBody=s)},null,8,["reset-selected","options","open"]),o(d,{"title-filter":"Коробка передач","reset-selected":e.reset,options:e.transmission,open:!e.loading,onSelectedItems:t[8]||(t[8]=s=>e.selectTransmission=s)},null,8,["reset-selected","options","open"]),o(d,{"title-filter":"Привод","reset-selected":e.reset,options:e.drive,open:!e.loading,onSelectedItems:t[9]||(t[9]=s=>e.selectDrive=s)},null,8,["reset-selected","options","open"]),o(d,{"title-filter":"Вид топлива","reset-selected":e.reset,options:e.fuel,open:!e.loading,onSelectedItems:t[10]||(t[10]=s=>e.selectFuel=s)},null,8,["reset-selected","options","open"]),o(M,{"title-filter":"Год выпуска","value-type":"year","value-min":e.minYear,"value-max":e.maxYear,"reset-selected":e.reset,open:!e.loading,onSelectedMin:t[11]||(t[11]=s=>e.selectMinYear=s),onSelectedMax:t[12]||(t[12]=s=>e.selectMaxYear=s)},null,8,["value-min","value-max","reset-selected","open"])],2),i("div",ee,[o(B,null,{content:p(()=>[te,i("p",se,[oe,i("span",ie,[b(" Если Вам необходим автомобиль в аренду перейдите в раздел "),o(S,{to:"/rent"},{default:p(()=>[b("Аренда")]),_:1}),b(" . ")])])]),close:p(()=>[ne]),_:1}),i("div",le,[e.loading?(a(),u(w,{key:0,height:"30px",width:"100%"})):(a(),m(h,{key:1},[o(f,{class:"filter-group__condition",name:"condition","reset-selected":e.reset,options:e.condition,onSelectedItems:t[13]||(t[13]=s=>e.selectCondition=s)},null,8,["reset-selected","options"]),o(f,{class:"filter-group__promo",name:"promo",options:e.promo,"reset-selected":e.reset,onSelectedItems:t[14]||(t[14]=s=>e.selectPromo=s)},null,8,["options","reset-selected"]),i("img",{onClick:t[15]||(t[15]=s=>e.isOpenSlidingSidebar=!e.isOpenSlidingSidebar),class:"filter-group__btn-filter",src:Z,alt:""})],64))]),i("div",ae,[e.loading?(a(),m(h,{key:0},k(15,s=>o(y,{key:s})),64)):c("",!0),e.filteringProduct.length?(a(),u(Y,{key:1,name:"collapse"},{default:p(()=>[(a(!0),m(h,null,k(e.filteringProduct.slice(e.pageStart,e.pageEnd),s=>(a(),u(F,{key:s.id,onSelectedModel:t[16]||(t[16]=E=>g.selectedModelFromCard(E)),product:s},null,8,["product"]))),128))]),_:1})):c("",!0)]),!e.filteringProduct.length&&!e.loading?(a(),m("div",re," Ничего не найдено ")):c("",!0),o(P,{title:"Не нашли ничего подходящего?",text:"Предложите свой вариант!",button:"Оставить заявку",onClickButton:t[17]||(t[17]=s=>r.showModalCallback=!0)}),i("div",de,[o(j,{name:"fade"},{default:p(()=>[r.showModalCallback?(a(),u(D,{key:0,"show-modal":r.showModalCallback,onCloseModal:t[18]||(t[18]=s=>r.showModalCallback=!1)},null,8,["show-modal"])):c("",!0)]),_:1})]),o(I,{"total-amount-data":e.filteringProduct.length,onActualPage:t[19]||(t[19]=s=>(e.pageStart=s.start,e.pageEnd=s.end))},null,8,["total-amount-data"])])]),o(V)])])}const Se=q(J,[["render",me],["__scopeId","data-v-9542cdcf"]]);export{Se as default};

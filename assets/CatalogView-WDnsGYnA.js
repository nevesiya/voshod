import{C as q}from"./CardLeasing-qi0YjzPW.js";import{_ as U,C as L,M as T,s as n,f as a,g as m,i,t as o,v as p,y as u,F as f,m as k,k as c,T as Y,D as A,x as h,z as N,A as j,E as G}from"./index-p3owiAcI.js";import{P as O}from"./PageProductMixin-hdi6h3Ot.js";import{u as Z,h as l}from"./FilterDataStore-PkZ1nVq9.js";import{f as z}from"./apiUtils-05fuKnWJ.js";import"./CardSkeleton-1ophAxiw.js";import"./BaseFooterSimple-IRZ4T6Y0.js";import"./BaseAccordion-L7oVmLHG.js";const H="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Fill'%3e%3cpath%20id='Subtract'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.9992%200.333374C6.89929%200.333374%200.333008%206.89966%200.333008%2014.9996C0.333008%2023.0995%206.89929%2029.6658%2014.9992%2029.6658C23.0991%2029.6658%2029.6654%2023.0995%2029.6654%2014.9996C29.6654%206.89966%2023.0991%200.333374%2014.9992%200.333374ZM16.4992%209.00004V7.50004H13.4992V9.00004V14.9998V16.4998H16.4992V14.9998V9.00004ZM16.4992%2020.9993C16.4992%2020.1709%2015.8276%2019.4993%2014.9992%2019.4993C14.1708%2019.4993%2013.4992%2020.1709%2013.4992%2020.9993V21.666C13.4992%2022.4944%2014.1708%2023.166%2014.9992%2023.166C15.8276%2023.166%2016.4992%2022.4944%2016.4992%2021.666V20.9993Z'%20fill='%23BF3535'/%3e%3c/g%3e%3c/svg%3e",R={components:{CardLeasing:q,BaseToast:L,ModalCallback:T},mixins:[O],data(){return{leasingCar:"",selectedModelOutsideItems:"",showModalCallback:!1,filterData:Z()}},watch:{},methods:{async getLeasingCars(){this.loading=!0;const e="data/leasing_car.json";this.leasingCar=await z("https://my.api.mockaroo.com/leasing_cars.json?key=a84cf050*",`/voshod/${e}`),typeof this.leasingCar=="object"&&this.actionsAfterGettingData(),this.loading=!1},actionsAfterGettingData(){this.product=l.getCarProducts(this.leasingCar),this.getDataFilter()},getDataFilter(){this.model=l.getCarModels(this.product),this.brand=l.getUniqueElements(this.product,"brand"),this.promo=l.getUniqueElements(this.product,"promo"),this.drive=l.getUniqueElements(this.product,"drive"),this.fuel=l.getUniqueElements(this.product,"fuel"),this.body=l.getUniqueElements(this.product,"body"),this.transmission=l.getUniqueElements(this.product,"transmission"),this.condition=l.getUniqueElements(this.product,"condition"),[this.minPrice,this.maxPrice]=l.findMinMaxDigits(this.product,"price"),[this.minYear,this.maxYear]=l.findMinMaxDigits(this.product,"year")},resetFilter(){this.getDataFilter(),this.reset++,this.filterData.similarModel=""},selectedModelFromCard(e){this.filterData.similarModel=e}},created(){this.getLeasingCars()},mounted(){this.filterData.similarModel&&(this.selectedModelOutsideItems=this.filterData.similarModel)},unmounted(){this.filterData.similarModel=""}},C=e=>(N("data-v-cfa7cf69"),e=e(),j(),e),J={class:"wrapper"},K={class:"main"},Q={class:"main-catalog"},W={class:"main-sidebar"},X=["disabled"],$={class:"main-content"},_=C(()=>i("img",{src:H,alt:"attention icon"},null,-1)),x={class:"attention-box"},ee=C(()=>i("span",{class:"attention-box__title"},"В каталоге представлены автомобили, которые проходят по программам лизинга. ",-1)),te={class:"attention-box__text"},se=C(()=>i("img",{src:G,alt:"close circle"},null,-1)),oe={class:"filter-group"},ne={class:"product"},ie={key:0,class:"product-null"},le={class:"modal-callback"};function ae(e,s,re,de,r,g){const M=n("filter-range"),d=n("filter-checkbox"),v=n("FilterCheckboxModels"),S=n("router-link"),B=n("base-toast"),y=n("BaseSkeleton"),b=n("FilterButton"),w=n("CardSkeleton"),F=n("CardLeasing"),P=n("BaseBanner"),D=n("ModalCallback"),I=n("BasePagination"),V=n("BaseFooterSimple");return a(),m("div",J,[i("main",K,[i("div",Q,[i("div",W,[i("button",{disabled:e.disabledResetButton,onClick:s[0]||(s[0]=(...t)=>g.resetFilter&&g.resetFilter(...t)),class:"button button--reset button--color-red button--size-xs"}," Сбросить фильтр ",8,X),o(M,{"title-filter":"Цена","value-type":"amount","value-min":e.minPrice,"value-max":e.maxPrice,"reset-selected":e.reset,open:!e.loading,onSelectedMin:s[1]||(s[1]=t=>e.selectMinPrice=t),onSelectedMax:s[2]||(s[2]=t=>e.selectMaxPrice=t)},null,8,["value-min","value-max","reset-selected","open"]),o(d,{"title-filter":"Марка","reset-selected":e.reset,options:e.brand,open:!e.loading,onSelectedItems:s[3]||(s[3]=t=>e.selectBrand=t)},null,8,["reset-selected","options","open"]),o(v,{onSelectedItems:s[4]||(s[4]=t=>e.selectModel=t),options:e.model,"reset-selected":e.reset,"selected-outside":r.selectedModelOutsideItems,open:!e.loading},null,8,["options","reset-selected","selected-outside","open"]),o(d,{"title-filter":"Кузов","reset-selected":e.reset,options:e.body,open:!e.loading,onSelectedItems:s[5]||(s[5]=t=>e.selectBody=t)},null,8,["reset-selected","options","open"]),o(d,{"title-filter":"Коробка передач","reset-selected":e.reset,options:e.transmission,open:!e.loading,onSelectedItems:s[6]||(s[6]=t=>e.selectTransmission=t)},null,8,["reset-selected","options","open"]),o(d,{"title-filter":"Привод","reset-selected":e.reset,options:e.drive,open:!e.loading,onSelectedItems:s[7]||(s[7]=t=>e.selectDrive=t)},null,8,["reset-selected","options","open"]),o(d,{"title-filter":"Вид топлива","reset-selected":e.reset,options:e.fuel,open:!e.loading,onSelectedItems:s[8]||(s[8]=t=>e.selectFuel=t)},null,8,["reset-selected","options","open"]),o(M,{"title-filter":"Год выпуска","value-type":"year","value-min":e.minYear,"value-max":e.maxYear,"reset-selected":e.reset,open:!e.loading,onSelectedMin:s[9]||(s[9]=t=>e.selectMinYear=t),onSelectedMax:s[10]||(s[10]=t=>e.selectMaxYear=t)},null,8,["value-min","value-max","reset-selected","open"])]),i("div",$,[o(B,null,{content:p(()=>[_,i("p",x,[ee,i("span",te,[h("Если Вам необходим автомобиль в аренду перейдите в раздел "),o(S,{to:"/rent"},{default:p(()=>[h("Аренда")]),_:1}),h(". ")])])]),close:p(()=>[se]),_:1}),i("div",oe,[e.loading?(a(),u(y,{key:0,height:"30px",width:"100%"})):(a(),m(f,{key:1},[o(b,{name:"condition","reset-selected":e.reset,options:e.condition,onSelectedItems:s[11]||(s[11]=t=>e.selectCondition=t)},null,8,["reset-selected","options"]),o(b,{name:"promo",options:e.promo,"reset-selected":e.reset,onSelectedItems:s[12]||(s[12]=t=>e.selectPromo=t)},null,8,["options","reset-selected"])],64))]),i("div",ne,[e.loading?(a(),m(f,{key:0},k(15,t=>o(w,{key:t})),64)):c("",!0),e.filteringProduct.length?(a(),u(Y,{key:1,name:"collapse"},{default:p(()=>[(a(!0),m(f,null,k(e.filteringProduct.slice(e.pageStart,e.pageEnd),t=>(a(),u(F,{key:t.id,onSelectedModel:s[13]||(s[13]=E=>g.selectedModelFromCard(E)),product:t},null,8,["product"]))),128))]),_:1})):c("",!0)]),!e.filteringProduct.length&&!e.loading?(a(),m("div",ie," Ничего не найдено ")):c("",!0),o(P,{title:"Не нашли ничего подходящего?",text:"Предложите свой вариант!",button:"Оставить заявку",onClickButton:s[14]||(s[14]=t=>r.showModalCallback=!0)}),i("div",le,[o(A,{name:"fade"},{default:p(()=>[r.showModalCallback?(a(),u(D,{key:0,"show-modal":r.showModalCallback,onCloseModal:s[15]||(s[15]=t=>r.showModalCallback=!1)},null,8,["show-modal"])):c("",!0)]),_:1})]),o(I,{"total-amount-data":e.filteringProduct.length,onActualPage:s[16]||(s[16]=t=>(e.pageStart=t.start,e.pageEnd=t.end))},null,8,["total-amount-data"])])]),o(V)])])}const Me=U(R,[["render",ae],["__scopeId","data-v-cfa7cf69"]]);export{Me as default};
